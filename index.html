<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê–ì–†–û–≠–ö–û –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ üêΩ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="config.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <div class="app">
        <header>
            <img src="IMG_5648.png" alt="–ê–ì–†–û–≠–ö–û –õ–æ–≥–æ—Ç–∏–ø" class="logo">
            <div class="user-info">
                <span id="userFirstName">–î—Ä—É–≥</span>
                <span id="userUserName"></span>
            </div>
            <div class="score-container">
                <span id="userScore">0</span> <span class="pig-nose">üêΩ</span>
            </div>
        </header>

        <main>
            <!-- –≠–∫—Ä–∞–Ω –º–µ–Ω—é -->
            <section id="screen-menu" class="screen active">
                <img src="https://images.unsplash.com/photo-1500937386664-56d1dfef3854?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="–ü–æ–ª—è –ê–ì–†–û–≠–ö–û" class="screen-image">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="menu-user-name">–î—Ä—É–≥</span>!</h2>
                <p>–ò–∑—É—á–∞–π—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é –ê–ì–†–û–≠–ö–û, —É—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞—Ö –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã!</p>
                <div class="button-container">
                    <button class="btn-primary" onclick="showIntro('quiz')" id="quiz-btn">üå± –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç</button>
                    <button class="btn-primary" onclick="showIntro('quest')" id="quest-btn">üèûÔ∏è –ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
                    <button class="btn-secondary" onclick="showScreen('screen-store')">üõí –ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–∑–æ–≤</button>
                    <button class="btn-secondary" onclick="showScreen('screen-profile')">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</button>
                    <button class="btn-secondary" onclick="showScreen('screen-stats')">üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                    <button class="btn-secondary" onclick="showScreen('screen-news')">üì∞ –ù–æ–≤–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏</button>
                    <!-- –°–∫—Ä—ã—Ç–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞ -->
                    <button class="btn-admin" onclick="showScreen('screen-admin')" id="admin-btn" style="display: none;">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –≤–≤–µ–¥–µ–Ω–∏—è -->
            <section id="screen-intro" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2 id="intro-title"></h2>
                </div>
                <div class="intro-content">
                    <img id="intro-image" src="" alt="" class="intro-image">
                    <div id="intro-description" class="intro-description"></div>
                    <div class="intro-reward">
                        <h3>üéÅ –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ:</h3>
                        <p id="intro-reward-text"></p>
                    </div>
                    <button class="btn-primary" id="start-activity">–ù–∞—á–∞—Ç—å</button>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω —Ç–µ—Å—Ç–∞ -->
            <section id="screen-quiz" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="exitQuiz()">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–¢–µ—Å—Ç: –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –ê–ì–†–û–≠–ö–û</h2>
                </div>
                <div id="quiz-progress">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 5</div>
                <div id="quiz-container">
                    <div id="question"></div>
                    <div id="answers" class="answers"></div>
                    <button id="next-question" class="btn-primary" onclick="nextQuestion()" disabled>–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –∫–≤–µ—Å—Ç–∞ -->
            <section id="screen-quest" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="exitQuest()">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ö–≤–µ—Å—Ç: –ü—É—Ç—å –∫ —É—Å–ø–µ—Ö—É –ê–ì–†–û–≠–ö–û</h2>
                </div>
                <div id="quest-progress">–®–∞–≥ 1 –∏–∑ 3</div>
                <div id="quest-image" class="quest-image"></div>
                <div id="quest-description" class="quest-description"></div>
                <div id="quest-answers" class="answers"></div>
                <button id="next-quest-step" class="btn-primary" onclick="nextQuestStep()" disabled>–î–∞–ª–µ–µ ‚Üí</button>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –º–∞–≥–∞–∑–∏–Ω–∞ -->
            <section id="screen-store" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–∑–æ–≤</h2>
                </div>
                <div class="store-instructions">
                    <h3>üéØ –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–∑:</h3>
                    <ol>
                        <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–∑ –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ</li>
                        <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"</li>
                        <li>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ (–§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å)</li>
                        <li>–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ</li>
                        <li>–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –≤—ã–¥–∞—á–∏ –ø—Ä–∏–∑–∞</li>
                    </ol>
                </div>
                <div id="store-items" class="store-container"></div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è -->
            <section id="screen-profile" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                </div>
                <div class="profile-info">
                    <div class="profile-avatar">
                        <img id="user-avatar" src="" alt="–ê–≤–∞—Ç–∞—Ä" onerror="this.style.display='none'">
                    </div>
                    <div class="profile-details">
                        <h3 id="profile-full-name">–ì–æ—Å—Ç—å</h3>
                        <p id="profile-user-name"></p>
                        <p>ID: <span id="profile-user-id"></span></p>
                    </div>
                </div>
                <div class="profile-form">
                    <h3>üìù –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–∑–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:</h3>
                    <input type="text" id="user-name" placeholder="–í–∞—à–µ –§–ò–û">
                    <input type="tel" id="user-phone" placeholder="–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω">
                    <input type="text" id="user-address" placeholder="–í–∞—à –∞–¥—Ä–µ—Å">
                    <button class="btn-primary" onclick="saveUserData()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                    <p id="profile-save-status"></p>
                </div>
                <div class="profile-purchases">
                    <h3>üõçÔ∏è –í–∞—à–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–∏–∑—ã:</h3>
                    <ul id="user-purchases"></ul>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
            <section id="screen-stats" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                </div>
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</h3>
                        <p class="stat-number"><span id="stat-current-score">0</span> üêΩ</p>
                    </div>
                    <div class="stat-card">
                        <h3>–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</h3>
                        <p class="stat-number"><span id="stat-total-score">0</span> üêΩ</p>
                    </div>
                    <div class="stat-card">
                        <h3>–ü—Ä–æ–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤</h3>
                        <p class="stat-number"><span id="stat-quizzes-completed">0</span></p>
                    </div>
                    <div class="stat-card">
                        <h3>–ó–∞–≤–µ—Ä—à–µ–Ω–æ –∫–≤–µ—Å—Ç–æ–≤</h3>
                        <p class="stat-number"><span id="stat-quests-completed">0</span></p>
                    </div>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –Ω–æ–≤–æ—Å—Ç–µ–π -->
            <section id="screen-news" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>üì∞ –ù–æ–≤–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏</h2>
                </div>
                <div class="news-container">
                    <div class="news-item">
                        <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –Ω–∞—à–µ–≥–æ Telegram-–∫–∞–Ω–∞–ª–∞</h3>
                        <p>–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª <a href="https://t.me/gk_agroeco" target="_blank">@gk_agroeco</a>, —á—Ç–æ–±—ã –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π!</p>
                    </div>
                    <div class="news-item">
                        <h3>üéâ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∞–∫—Ü–∏—è!</h3>
                        <p>–£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞—Ö –∏ –∫–≤–µ—Å—Ç–∞—Ö, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª—å—à–µ –ø—è—Ç–æ—á–∫–æ–≤ –∏ –æ–±–º–µ–Ω—è—Ç—å –∏—Ö –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑—ã!</p>
                    </div>
                    <div class="news-item">
                        <h3>üèÜ –ù–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                        <p>–ù–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –∏ –≤–Ω–µ–¥—Ä—è—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ —Å–µ–ª—å—Å–∫–æ–º —Ö–æ–∑—è–π—Å—Ç–≤–µ.</p>
                    </div>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞ -->
            <section id="screen-success" class="screen">
                <div class="success-content">
                    <h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
                    <p id="success-message"></p>
                    <button class="btn-primary" onclick="showScreen('screen-menu')">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞/–∫–≤–µ—Å—Ç–∞ -->
            <section id="screen-completed" class="screen">
                <div class="success-content">
                    <h2>‚úÖ –£–∂–µ –ø—Ä–æ–π–¥–µ–Ω–æ</h2>
                    <p id="completed-message"></p>
                    <button class="btn-primary" onclick="showScreen('screen-menu')">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
                </div>
            </section>

            <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
            <section id="screen-admin" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                </div>
                <div class="admin-content">
                    <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
                    <div class="admin-actions">
                        <button class="btn-primary" onclick="loadOrders()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑—ã</button>
                        <button class="btn-secondary" onclick="exportOrders()">üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</button>
                        <button class="btn-admin" onclick="showUserManagement()">üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</button>
                    </div>

                    <div id="user-management" style="display: none; margin-top: 20px;">
                        <h4>–°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h4>
                        <input type="text" id="user-id-input" placeholder="ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
                        <div style="display: flex; gap: 10px;">
                            <button class="btn-secondary" onclick="resetUserProgress()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
                            <button class="btn-admin" onclick="deleteUserData()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                        </div>
                        <p id="user-management-status" style="margin-top: 10px;"></p>
                    </div>

                    <div class="orders-table-container">
                        <h3>üì¶ –ó–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                        <table class="orders-table">
                            <thead>
                                <tr>
                                    <th>–î–∞—Ç–∞</th>
                                    <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                    <th>–ü—Ä–∏–∑</th>
                                    <th>–¶–µ–Ω–∞</th>
                                    <th>–§–ò–û</th>
                                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                    <th>–ê–¥—Ä–µ—Å</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                </tr>
                            </thead>
                            <tbody id="orders-table-body">
                                <tr>
                                    <td colspan="8">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏ -->
        <div id="purchase-modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h2>‚úÖ –í—ã–±–æ—Ä –ø—Ä–∏–∑–∞</h2>
                <div id="modal-item-info"></div>
                <div class="modal-instructions">
                    <h4>üìã –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–∑:</h4>
                    <ol>
                        <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"</li>
                        <li>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ</li>
                        <li>–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ</li>
                        <li>–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –¥–ª—è –≤—ã–¥–∞—á–∏ –ø—Ä–∏–∑–∞</li>
                    </ol>
                </div>
                <div class="modal-actions">
                    <button class="btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-primary" onclick="confirmPurchase()">–í—ã–±—Ä–∞—Ç—å –ø—Ä–∏–∑</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ -->
        <div id="success-modal" class="modal">
            <div class="modal-content">
                <h2>üéâ –ü—Ä–∏–∑ –≤—ã–±—Ä–∞–Ω!</h2>
                <p id="success-modal-message"></p>
                <div class="modal-instructions">
                    <p><strong>–î–∞–ª–µ–µ:</strong> –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å", –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏!</p>
                </div>
                <div class="modal-actions">
                    <button class="btn-primary" onclick="closeSuccessModal()">–ü–æ–Ω—è—Ç–Ω–æ</button>
                    <button class="btn-secondary" onclick="goToProfile()">–ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å</button>
                </div>
            </div>
        </div>

        <footer>
            <p>¬© 2025 –ê–ì–†–û–≠–ö–û. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>
</body>
</html>
