<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê–ì–†–û–≠–ö–û –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ üêΩ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="config.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <div class="app">
        <header>
            <img src="IMG_5648.png" alt="–ê–ì–†–û–≠–ö–û –õ–æ–≥–æ—Ç–∏–ø" class="logo">
            <div class="user-info">
                <span id="userFirstName">–î—Ä—É–≥</span>
                <span id="userUserName"></span>
            </div>
            <div class="score-container">
                <span id="userScore">0</span> <span class="pig-nose">üêΩ</span>
            </div>
        </header>

        <main>
            <!-- –≠–∫—Ä–∞–Ω –º–µ–Ω—é -->
            <section id="screen-menu" class="screen active">
                <img src="https://images.unsplash.com/photo-1500937386664-56d1dfef3854?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="–ü–æ–ª—è –ê–ì–†–û–≠–ö–û" class="screen-image">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="menu-user-name">–î—Ä—É–≥</span>!</h2>
                <p>–ò–∑—É—á–∞–π—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é –ê–ì–†–û–≠–ö–û, —É—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞—Ö –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã!</p>
                <div class="button-container">
                    <button class="btn-primary" onclick="startQuiz()" id="quiz-btn">üå± –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç</button>
                    <button class="btn-primary" onclick="startQuest()" id="quest-btn">üèûÔ∏è –ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
                    <button class="btn-secondary" onclick="showScreen('screen-store')">üõí –ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–∑–æ–≤</button>
                    <button class="btn-secondary" onclick="showScreen('screen-profile')">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</button>
                    <button class="btn-secondary" onclick="showScreen('screen-stats')">üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                    <!-- –°–∫—Ä—ã—Ç–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞ -->
                    <button class="btn-admin" onclick="showScreen('screen-admin')" id="admin-btn" style="display: none;">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω —Ç–µ—Å—Ç–∞ -->
            <section id="screen-quiz" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="exitQuiz()">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–¢–µ—Å—Ç: –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –ê–ì–†–û–≠–ö–û</h2>
                </div>
                <div id="quiz-progress">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 5</div>
                <div id="quiz-container">
                    <div id="question"></div>
                    <div id="answers" class="answers"></div>
                    <button id="next-question" class="btn-primary" onclick="nextQuestion()" disabled>–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –∫–≤–µ—Å—Ç–∞ -->
            <section id="screen-quest" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="exitQuest()">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ö–≤–µ—Å—Ç: –ü—É—Ç—å –∫ —É—Å–ø–µ—Ö—É –ê–ì–†–û–≠–ö–û</h2>
                </div>
                <div id="quest-progress">–®–∞–≥ 1 –∏–∑ 3</div>
                <div id="quest-image" class="quest-image"></div>
                <div id="quest-description" class="quest-description"></div>
                <div id="quest-answers" class="answers"></div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –º–∞–≥–∞–∑–∏–Ω–∞ -->
            <section id="screen-store" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–∑–æ–≤</h2>
                </div>
                <p>–û–±–º–µ–Ω–∏–≤–∞–π—Ç–µ –≤–∞—à–∏ –ø—è—Ç–æ—á–∫–∏ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑—ã –æ—Ç –ê–ì–†–û–≠–ö–û!</p>
                <div id="store-items" class="store-container"></div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è -->
            <section id="screen-profile" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                </div>
                <div class="profile-info">
                    <div class="profile-avatar">
                        <img id="user-avatar" src="" alt="–ê–≤–∞—Ç–∞—Ä" onerror="this.style.display='none'">
                    </div>
                    <div class="profile-details">
                        <h3 id="profile-full-name">–ì–æ—Å—Ç—å</h3>
                        <p id="profile-user-name"></p>
                        <p>ID: <span id="profile-user-id"></span></p>
                    </div>
                </div>
                <div class="profile-form">
                    <h3>–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–∑–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:</h3>
                    <input type="text" id="user-name" placeholder="–í–∞—à–µ –§–ò–û">
                    <input type="tel" id="user-phone" placeholder="–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω">
                    <input type="text" id="user-address" placeholder="–í–∞—à –∞–¥—Ä–µ—Å">
                    <button class="btn-primary" onclick="saveUserData()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                    <p id="profile-save-status"></p>
                </div>
                <div class="profile-purchases">
                    <h3>–í–∞—à–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑—ã:</h3>
                    <ul id="user-purchases"></ul>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
            <section id="screen-stats" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                </div>
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</h3>
                        <p class="stat-number"><span id="stat-current-score">0</span> üêΩ</p>
                    </div>
                    <div class="stat-card">
                        <h3>–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</h3>
                        <p class="stat-number"><span id="stat-total-score">0</span> üêΩ</p>
                    </div>
                    <div class="stat-card">
                        <h3>–ü—Ä–æ–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤</h3>
                        <p class="stat-number"><span id="stat-quizzes-completed">0</span></p>
                    </div>
                    <div class="stat-card">
                        <h3>–ó–∞–≤–µ—Ä—à–µ–Ω–æ –∫–≤–µ—Å—Ç–æ–≤</h3>
                        <p class="stat-number"><span id="stat-quests-completed">0</span></p>
                    </div>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞ -->
            <section id="screen-success" class="screen">
                <div class="success-content">
                    <h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
                    <p id="success-message"></p>
                    <button class="btn-primary" onclick="showScreen('screen-menu')">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
                </div>
            </section>

            <!-- –≠–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞/–∫–≤–µ—Å—Ç–∞ -->
            <section id="screen-completed" class="screen">
                <div class="success-content">
                    <h2>‚úÖ –£–∂–µ –ø—Ä–æ–π–¥–µ–Ω–æ</h2>
                    <p id="completed-message"></p>
                    <button class="btn-primary" onclick="showScreen('screen-menu')">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</button>
                </div>
            </section>

            <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
            <section id="screen-admin" class="screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="showScreen('screen-menu')">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                </div>
                <div class="admin-content">
                    <h3>–ó–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div class="admin-actions">
                        <button class="btn-primary" onclick="loadOrders()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                        <button class="btn-secondary" onclick="exportOrders()">üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</button>
                    </div>
                    <div class="orders-table-container">
                        <table class="orders-table">
                            <thead>
                                <tr>
                                    <th>–î–∞—Ç–∞</th>
                                    <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                    <th>–ü—Ä–∏–∑</th>
                                    <th>–¶–µ–Ω–∞</th>
                                    <th>–§–ò–û</th>
                                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                    <th>–ê–¥—Ä–µ—Å</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                </tr>
                            </thead>
                            <tbody id="orders-table-body">
                                <tr>
                                    <td colspan="8">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏ -->
        <div id="purchase-modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏</h2>
                <div id="modal-item-info"></div>
                <p>–ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –≤–∞—à–µ–º –ø—Ä–æ—Ñ–∏–ª–µ.</p>
                <div class="modal-actions">
                    <button class="btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-primary" onclick="confirmPurchase()">–ö—É–ø–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ -->
        <div id="success-modal" class="modal">
            <div class="modal-content">
                <h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –ø–æ–∫—É–ø–∫–æ–π!</h2>
                <p id="success-modal-message"></p>
                <div class="modal-actions">
                    <button class="btn-primary" onclick="closeSuccessModal()">–û—Ç–ª–∏—á–Ω–æ!</button>
                    <button class="btn-secondary" onclick="goToProfile()">–ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                </div>
            </div>
        </div>

        <footer>
            <p>¬© 2025 –ê–ì–†–û–≠–ö–û. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>
</body>
</html>
